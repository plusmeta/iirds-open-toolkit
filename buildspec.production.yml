version: 0.2
    
phases:
  install:
    runtime-versions:
      nodejs: 12
    commands:
      - npm install @vue/cli -g --quiet
      # - npm install @sentry/cli -g --unsafe-perm
  pre_build:
    commands:
      - chmod +x ./script/git.helper.sh
      # - chmod +x ./script/sentry.release.sh
      # - chmod +x ./script/sentry.deploy.sh
      # - chmod +x ./script/sentry.finalize.sh
      - npm install --no-shrinkwrap
  build:
    commands:
      - ./script/git.helper.sh master
      - npm run-script build-prod
      # - ./script/sentry.release.sh
  post_build:
    commands:
      # - ./script/sentry.finalize.sh
      # - ./script/sentry.deploy.sh production
artifacts:
    files:
      - '**/*'
    base-directory: 'dist'
